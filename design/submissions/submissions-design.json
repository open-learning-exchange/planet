{"views":{"submissionsByParent":{"map":"function(doc) {\n        if (doc.type === 'survey' && doc.parentId) {\n          var baseSurveyId = doc.parentId.split('@')[0];\n          var teamId = doc.team && doc.team._id ? doc.team._id : (doc.parent && doc.parent.teamId ? doc.parent.teamId : null);\n\n          var parentInfo = null;\n          if (doc.parent && doc.parent.sourcePlanet) {\n            parentInfo = {\n              _id: doc.parent._id,\n              name: doc.parent.name,\n              sourcePlanet: doc.parent.sourcePlanet,\n              teamShareAllowed: doc.parent.teamShareAllowed,\n              isArchived: doc.parent.isArchived,\n              createdDate: doc.parent.createdDate\n            };\n          }\n\n          emit([baseSurveyId, teamId], {\n            status: doc.status || 'pending',\n            teamId: teamId,\n            parent: parentInfo\n          });\n        }\n      }"}}}