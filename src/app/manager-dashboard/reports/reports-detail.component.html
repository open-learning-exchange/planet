<mat-toolbar>
  <button class="btnBack" mat-icon-button routerLink="/manager">
    <mat-icon>arrow_back</mat-icon>
  </button>
  <span i18n>Reports</span>
  <span class="toolbar-fill"></span>
</mat-toolbar>
<div class="space-container">
  <mat-toolbar>
    <mat-toolbar-row class="primary-color font-size-1">
      <span>{{planetName}}</span>
    </mat-toolbar-row>
  </mat-toolbar>
  <div class="view-container view-full-height">
    <canvas id="visitChart"></canvas>
    <canvas id="resourceViewChart"></canvas>
    <canvas id="uniqueVisitChart"></canvas>
    <div class="reports-table-container">
      <div>
        <h1>Members</h1>
        <mat-grid-list cols="2" rowHeight="2rem">
          <mat-grid-tile><div class="label">Total Members</div></mat-grid-tile>
          <mat-grid-tile>{{reports?.totalUsers}}</mat-grid-tile>
          <mat-grid-tile><div class="sublabel">Male</div></mat-grid-tile>
          <mat-grid-tile>{{reports?.usersByGender?.male || 0}}</mat-grid-tile>
          <mat-grid-tile><div class="sublabel">Female</div></mat-grid-tile>
          <mat-grid-tile>{{reports?.usersByGender?.female || 0}}</mat-grid-tile>
          <mat-grid-tile><div class="sublabel">Did not specify</div></mat-grid-tile>
          <mat-grid-tile>{{reports?.usersByGender?.didNotSpecify || 0}}</mat-grid-tile>
          <mat-grid-tile><div class="label">Total Visits</div></mat-grid-tile>
          <mat-grid-tile>{{reports?.totalMemberVisits}}</mat-grid-tile>
          <mat-grid-tile><div class="label">Members by Visits</div></mat-grid-tile>
          <mat-grid-tile>Total Visits by Member</mat-grid-tile>
          <ng-container *ngIf="!reports?.visits || reports?.visits.length === 0">
            <mat-grid-tile colspan="2" i18n>There are no visits</mat-grid-tile>
          </ng-container>
          <ng-container *ngFor="let visit of reports?.visits">
            <mat-grid-tile><a [routerLink]="['/users/profile', visit.user]"><div class="sublabel">{{visit.user}}</div></a></mat-grid-tile>
            <mat-grid-tile>{{visit.count}}</mat-grid-tile>
          </ng-container>
        </mat-grid-list>
      </div>
      <div>
        <h1>Resources</h1>
        <mat-grid-list cols="2" rowHeight="2rem">
          <mat-grid-tile><div class="label">Total Resources</div></mat-grid-tile>
          <mat-grid-tile>{{reports?.totalResources}}</mat-grid-tile>
          <mat-grid-tile><div class="label">Total Views</div></mat-grid-tile>
          <mat-grid-tile>{{reports?.totalResourceViews}}</mat-grid-tile>
          <mat-grid-tile><div class="label">Most Visited</div></mat-grid-tile>
          <mat-grid-tile>Total Visits by Resource</mat-grid-tile>
          <ng-container *ngIf="!reports?.resources || reports?.resources.length === 0">
            <mat-grid-tile colspan="2" i18n>No resources have been visited</mat-grid-tile>
          </ng-container>
          <ng-container *ngFor="let resource of reports?.resources">
            <mat-grid-tile><a [routerLink]="['/resources/view', resource.resourceId]"><div class="sublabel">{{resource?.max?.title}}</div></a></mat-grid-tile>
            <mat-grid-tile>{{resource.count}}</mat-grid-tile>
          </ng-container>
          <mat-grid-tile><div class="label">Highest Rated</div></mat-grid-tile>
          <mat-grid-tile>Average Rating</mat-grid-tile>
          <ng-container *ngIf="!reports?.resourceRatings || reports?.resourceRatings.length === 0">
            <mat-grid-tile colspan="2" i18n>There are no resource ratings</mat-grid-tile>
          </ng-container>
          <ng-container *ngFor="let rating of reports?.resourceRatings">
            <mat-grid-tile><a [routerLink]="['/resources/view', rating.item]"><div class="sublabel">{{rating?.title}}</div></a></mat-grid-tile><mat-grid-tile>{{rating?.value}}</mat-grid-tile>
          </ng-container>
        </mat-grid-list>
      </div>
      <div>
        <h1>Courses</h1>
        <mat-grid-list cols="2" rowHeight="2rem">
          <mat-grid-tile><div class="label">Total Courses</div></mat-grid-tile>
          <mat-grid-tile>{{reports?.totalCourses}}</mat-grid-tile>
          <mat-grid-tile><div class="label">Highest Rated</div></mat-grid-tile>
          <mat-grid-tile>Average Rating</mat-grid-tile>
          <ng-container *ngIf="!reports?.courseRatings || reports?.courseRatings.length === 0">
            <mat-grid-tile colspan="2" i18n>There are no course ratings</mat-grid-tile>
          </ng-container>
          <ng-container *ngFor="let rating of reports?.courseRatings">
            <mat-grid-tile><a [routerLink]="['/courses/view', rating.item]"><div class="sublabel">{{rating?.title}}</div></a></mat-grid-tile><mat-grid-tile>{{rating?.value}}</mat-grid-tile>
          </ng-container>
        </mat-grid-list>
      </div>
    </div>
  </div>
</div>
